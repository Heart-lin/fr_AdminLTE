<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>AdminLTE 2 | order</title>
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="bower_components/Ionicons/css/ionicons.min.css">
		<link rel="stylesheet" href="dist/css/AdminLTE.min.css">
		<link rel="stylesheet" href="dist/css/skins/skin-blue.min.css">
		<link rel="stylesheet" href="css/fr_card.css">
		<link rel="stylesheet" href="css/fr_style.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
		<link rel="stylesheet" href="bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
		<link rel="stylesheet" href="bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
	</head>

	<body class="hold-transition skin-blue sidebar-mini">
		<div class="wrapper">
			<div class="content-wrapper">
				<section class="content-header ">
					<ol class="breadcrumb">
						<li>
							<a href="#"><i class="fa fa-dashboard"></i>订单管理</a>
						</li>
						<li class="active">订单列表</li>
					</ol>
				</section>
				<section class="content">
					<div class="box box-primary"id="orderInfo">
						<div class="details_card">
							<div class="box-header ui-sortable-handle">
								<i class="fa fa-comments-o"></i>
								<h3 class="box-title">单号：<span name="id">--</span></h3>
								<div class="box-tools pull-right">
									<div class="btn-group">
										<button type="button" class="btn btn-default">取消</button>
										<button type="button" class="btn btn-info">确认收款</button>
									</div>
								</div>
							</div>
							<div class="box-body">
								<div class="row">
									<div class="col-xs-3">
										<div class="details_card_left">用户ID：</div>
										<div class="inline-block" name="userId">--</div>
									</div>
									<div class="col-xs-3">
										<div class="details_card_left">码类：</div>
										<div class="inline-block" name="codeType">--</div>
									</div>
									<div class="col-xs-6">
										<div class="details_card_left">订单金额：</div>
										<div class="inline-block"><span class="fr_bigText">￥<span name="money"></span></span></div>
									</div>
									<div class="col-xs-3">
										<div class="details_card_left">创建时间：</div>
										<div class="inline-block" name="time">--</div>
									</div>
									<div class="col-xs-3">
										<div class="details_card_left">订单状态：</div>
										<div class="inline-block" name="status">--</div>
									</div>

								</div>
							</div>
						</div>

					</div>
					<div class="box box-primary">
						<div class="box-header ui-sortable-handle">
							<h3 class="box-title">流程进度</span></h3>
						</div>
						<div class="box-body">
							<div class="row">
								<div class="fr_time_line">
									<div class="col-xs-3">
										<div class="fr_time_line_steps_item active">
											<div class="fr_time_line_title">
												<h4>创建单据</h4>
											</div>
											<div class="fr_time_line_time">
												<p>2016-12-12 12:32</p>
											</div>
											<span class="fr_time_line_dot"></span>
										</div>
									</div>
									<div class="col-xs-3">
										<div class="fr_time_line_steps_item active">
											<div class="fr_time_line_title">
												<h4>待确认收款</h4>
											</div>
											<div class="fr_time_line_time">
												<p>2016-12-12 12:32</p>
											</div>
											<span class="fr_time_line_dot"></span>
										</div>
									</div>
									<div class="col-xs-3">
										<div class="fr_time_line_steps_item">
											<div class="fr_time_line_title">
												<h4>完成</h4>
											</div>

											<span class="fr_time_line_dot"></span>
										</div>
									</div>
									<div class="col-xs-3">
										<div class="fr_time_line_steps_item">
											<div class="fr_time_line_title">
												<h4>取消</h4>
											</div>

											<span class="fr_time_line_dot"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="box box-primary">
						<div class="box-header ui-sortable-handle">
							<h3 class="box-title">收款码信息</span></h3>
						</div>
						<div class="box-body" id="codeInfo">
							<div class="details_card" style="margin-bottom:20px;">
								<div class="row">
									<div class="col-xs-3">
										<div>
											<div class="details_card_left">收款码分类：</div>
											<div class="inline-block" name="codeType">--</div>
										</div>
										<div>
											<div class="details_card_left">总收款金额：</div>
											<div class="inline-block" name="overOrderCount">--</div>
										</div>
										<div>
											<div class="details_card_left">今日收款金额：</div>
											<div class="inline-block" name="todayMoney">--</div>
										</div>
									</div>
									<div class="col-xs-6">
										<div class="row">
											<div class="col-xs-12">
												<div>
													<div class="details_card_left">添加时间：</div>
													<div class="inline-block" name="time">--</div>
												</div>
											</div>
											<div class="col-xs-12">
												<div>
													<div class="details_card_left">账号：</div>
													<div class="inline-block" name="account">--</div>
												</div>
											</div>
											<div class="col-xs-3">
												<div>
													<div class="details_card_left" style="width:60px;">订单数：</div>
													<div class="inline-block" name="orderCount">--</div>
												</div>
											</div>
											<div class="col-xs-3">
												<div>
													<div class="details_card_left" style="width:60px;">成单数：</div>
													<div class="inline-block" name="overOrderCount">--</div>
												</div>
											</div>
											<div class="col-xs-3">
												<div>
													<div class="details_card_left" style="width:60px;">成单率：</div>
													<div class="inline-block"><span name="overRate">--</span>%</div>
												</div>
											</div>
										</div>
									</div>
									<div class="col-xs-3">
										<div>
											<img src="img/code.png" alt="" style="width:105px;height:105px;" />
										</div>
									</div>
									<div style="height:20px;"></div>
								</div>
							</div>

						</div>
						<div class="box-header ui-sortable-handle">
							<h3 class="box-title">收款分配</span></h3>
						</div>
						<div class="box-body">
							<table id="example" class="table table-bordered table-hover picTable">
								<!--<thead>-->
								<thead>
									<tr>
										<th>收益类型</th>
										<th>收益ID</th>
										<th>收益金额</th>
										<th>操作时间</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					</div>
			</div>
			</section>
		</div>
		</div>
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="dist/js/adminlte.min.js"></script>

		<script src="bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
		<script src="bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
		<script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

		<!--<script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>-->
		<script src="plugins/timepicker/bootstrap-timepicker.min.js"></script>
		<script src="bower_components/moment/min/moment.min.js"></script>
		<script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

		<script src="js/fr_func.js"></script>
		<script src="js/fr.js"></script>
		<script src="js/nav.js"></script>
		<script type="text/javascript">
			$(function() {
				var param = {
					token: localStorage.getItem("fr_token"),
					id: GetRequest().id
				}
				$.ajax({
					type: "post",
					url: url + "/order/orderDetails",
					async: true,
					data: JSON.stringify(param),
					contentType: "application/json",
					dataType: "json",
					success: function(res) {
						if(res.returnCode == 501) {
							ToLogin(res)
						} else if(res.returnCode == 200) {
							$.each(res.data.codeInfo, function(index, item) {
								if(index=="type"){
									$("#codeInfo [name=codeType]").text(codeType(item));
								}else{
									$("#codeInfo [name=" + index + "]").text(item);
								}
							})

							$.each(res.data.orderInfo, function(index, item) {
								
								if(index=="receiveType"){
									$("#orderInfo [name=codeType]").text(codeType(item));
								}else{
									$("#orderInfo [name=" + index + "]").text(item);
								}
							}) //orderInfo
							$("#example tbody").empty();
							$.each(res.data.incomeDetailsList,function(index,item){
								$("#example tbody").append('<tr><td>'+ level(item.level) +'</td><td>'+ item.receiveOrderId +'</td><td>'+ item.money +'</td><td>'+ item.time +'</td></tr>')
							})
							
							

						} else {
							alert(res.msg);
						}
					}
				})
			})
		</script>
	</body>

</html>