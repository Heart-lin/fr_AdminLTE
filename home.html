<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>AdminLTE 2 | Starter</title>
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="bower_components/Ionicons/css/ionicons.min.css">
		<link rel="stylesheet" href="dist/css/AdminLTE.min.css">
		<link rel="stylesheet" href="dist/css/skins/skin-blue.min.css">
		<link rel="stylesheet" href="css/fr_card.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
		<link rel="stylesheet" href="bower_components/bootstrap-daterangepicker/daterangepicker.css">
	</head>

	<body class="hold-transition skin-blue sidebar-mini">
		<div class="wrapper">

			<div class="content-wrapper">
				<section class="content-header">
					<h1>
        Page Header
        <small>Optional description</small>
      </h1>
					<ol class="breadcrumb">
						<li>
							<a href="#"><i class="fa fa-dashboard"></i> Level</a>
						</li>
						<li class="active">Here</li>
					</ol>
				</section>
				<section class="content">
					<div class="row">
						<div class="col-md-3 col-sm-6 col-xs-12">
							<div class="info-box">
								<div class="fr_card">
									<div class="fr_card_title">
										<div class="fr_card_title_meta">
											<span>用户总数</span>
											<div class="fr_card_title_action">
												<i class="fa fa-fw fa-question-circle"></i>
											</div>
										</div>
										<div class="fr_card_title_total" name="todayPayOrderCount">
											----
										</div>
									</div>
									<div class="fr_card_body">
										<div class="fr_card_content">
											<div class="fr_card_contentFixed">
												<div class="fr_card_trendItem" style="margin-right:10px;">
													<span>周同比<span class="fr_card_trendText">16%</span></span>
													<span class="fr_card_trend_up"><i class="fa fa-fw fa-sort-up"></i></span>
												</div>
												<div class="fr_card_trendItem">
													<span>日还比<span class="fr_card_trendText">16%</span></span>
													<span class="fr_card_trend_down"><i class="fa fa-fw fa-sort-down"></i></span>
												</div>
											</div>
										</div>
									</div>
									<div class="fr_card_footer">
										<div class="fr_card_footer_field">
											<span>日还比</span>
											<span class="fr_card_footer_field_number">123</span>
										</div>
									</div>
								</div>
								<!-- /.info-box-content -->
							</div>
							<!-- /.info-box -->
						</div>
						<!-- /.col -->
						<div class="col-md-3 col-sm-6 col-xs-12">
							<div class="info-box">
								<div class="fr_card">
									<div class="fr_card_title">
										<div class="fr_card_title_meta">
											<span>用户总数</span>
											<div class="fr_card_title_action">
												<i class="fa fa-fw fa-question-circle"></i>
											</div>
										</div>
										<div class="fr_card_title_total" name="todayRegisterCount">
											----
										</div>
									</div>
									<div class="fr_card_body">
										<div class="fr_card_content">
											<div class="fr_card_contentFixed">
												<div class="fr_card_trendItem" style="margin-right:10px;">
													<span>周同比<span class="fr_card_trendText">16%</span></span>
													<span class="fr_card_trend_up"><i class="fa fa-fw fa-sort-up"></i></span>
												</div>
												<div class="fr_card_trendItem">
													<span>日还比<span class="fr_card_trendText">16%</span></span>
													<span class="fr_card_trend_down"><i class="fa fa-fw fa-sort-down"></i></span>
												</div>
											</div>
										</div>
									</div>
									<div class="fr_card_footer">
										<div class="fr_card_footer_field">
											<span>日还比</span>
											<span class="fr_card_footer_field_number">123</span>
										</div>
									</div>
								</div>
								<!-- /.info-box-content -->
							</div>
							<!-- /.info-box -->
						</div>
						<!-- /.col -->

						<!-- fix for small devices only -->
						<div class="clearfix visible-sm-block"></div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<div class="info-box">
								<div class="fr_card">
									<div class="fr_card_title">
										<div class="fr_card_title_meta">
											<span>支付笔数</span>
											<div class="fr_card_title_action">
												<i class="fa fa-fw fa-question-circle"></i>
											</div>
										</div>
										<div class="fr_card_title_total" name="userCount">
											----
										</div>
									</div>
									<div class="fr_card_body">
										<div class="fr_card_content">
											<div class="fr_card_contentFixed">
												<div class="fr_card_trendItem" style="margin-right:10px;">
													<span>周同比<span class="fr_card_trendText">16%</span></span>
													<span class="fr_card_trend_up"><i class="fa fa-fw fa-sort-up"></i></span>
												</div>
												<div class="fr_card_trendItem">
													<span>日还比<span class="fr_card_trendText">16%</span></span>
													<span class="fr_card_trend_down"><i class="fa fa-fw fa-sort-down"></i></span>
												</div>
											</div>
										</div>
									</div>
									<div class="fr_card_footer">
										<div class="fr_card_footer_field">
											<span>日还比</span>
											<span class="fr_card_footer_field_number">123</span>
										</div>
									</div>
								</div>
								<!-- /.info-box-content -->
							</div>
							<!-- /.info-box -->
						</div>
						<!-- /.col -->
						<div class="col-md-3 col-sm-6 col-xs-12">
							<div class="info-box">
								<div class="fr_card">
									<div class="fr_card_title">
										<div class="fr_card_title_meta">
											<span>运营活动效果</span>
											<div class="fr_card_title_action">
												<i class="fa fa-fw fa-question-circle"></i>
											</div>
										</div>
										<div class="fr_card_title_total">
											<span name="successRate1">40</span>%
										</div>
									</div>
									<div class="fr_card_body">
										<div class="fr_card_content">
											<div class="fr_card_contentFixed">
												<div class="progress" style="height：20px;">
													<div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
														<span class="sr-only"></span>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="fr_card_footer">
										<div class="fr_card_footer_field">
											<div class="fr_card_trendItem" style="margin-right:5px;">
												<span>周同比<span class="fr_card_trendText">16%</span></span>
												<span class="fr_card_trend_up"><i class="fa fa-fw fa-sort-up"></i></span>
											</div>
											<div class="fr_card_trendItem">
												<span>日还比<span class="fr_card_trendText">16%</span></span>
												<span class="fr_card_trend_down"><i class="fa fa-fw fa-sort-down"></i></span>
											</div>
										</div>
									</div>
								</div>
								<!-- /.info-box-content -->
							</div>
							<!-- /.info-box -->
						</div>
						<!-- /.col -->
					</div>

					<div class="box box-success">
						<div class="box-header" style="border-bottom:1px solid #eee;">
							<h3 class="box-title">使用统计</h3>
							<div class="box-tools pull-right" data-toggle="tooltip" title="Status" style="width:300px;">
								<div class="form-group">
									<div class="input-group">
										<div class="input-group-addon">
											<i class="fa fa-calendar"></i>
										</div>
										<input type="text" class="form-control pull-right" id="reservation">
									</div>
									<!-- /.input group -->
								</div>
							</div>
						</div>
						<div class="box-body chat">
							<!-- chat item -->
							<div class="box_body_title">
								<span>平台码成功率</span>
							</div>
							<div class="box_body_card list list5">
								<ul>
									<li>
										<div class="list_card purple">
											<h4 class="list_card_title">总成功率</h4>
											<span class="list_card_number"><span name="totalRate">--</span>%</span>
										</div>
									</li>
									<li>
										<div class="list_card blue">
											<h4 class="list_card_title">支付宝个码成功率</h4>
											<span class="list_card_number"><span name="aliRate"></span>%</span>
										</div>
									</li>
									<li>
										<div class="list_card green">
											<h4 class="list_card_title">微信个码成功率</h4>
											<span class="list_card_number"><span name="wxRate"></span>%</span>
										</div>
									</li>
									<li>
										<div class="list_card yellow">
											<h4 class="list_card_title">银行卡个码成功率</h4>
											<span class="list_card_number"><span name="bankRate"></span>%</span>
										</div>
									</li>
									<li>
										<div class="list_card red">
											<h4 class="list_card_title">商户码成功率</h4>
											<span class="list_card_number"><span name="merchantRate"></span>%</span>
										</div>
									</li>
								</ul>
							</div>
							<!-- /.item -->
							<div class="box_body_title">
								<span>平台码订单数</span>
							</div>
							<div class="box_body_card list list5">
								<ul>

									<li>
										<div class="list_card_count">
											<h4 class="list_card_number" name="totalOrderCount">--</h4>
											<span class="list_card_title">总订单数</span>
										</div>
									</li>
									<li>
										<div class="list_card_count">
											<h4 class="list_card_number" name="aliCodeOrderCount">--</h4>
											<span class="list_card_title">支付宝个码订单数</span>
										</div>
									</li>
									<li>
										<div class="list_card_count">
											<h4 class="list_card_number" name="wxCodeOrderCount">--</h4>
											<span class="list_card_title">微信个码订单数</span>
										</div>
									</li>
									<li>
										<div class="list_card_count">
											<h4 class="list_card_number" name="bankOrderCount">--</h4>
											<span class="list_card_title">银行卡个码订单数</span>
										</div>
									</li>
									<li>
										<div class="list_card_count">
											<h4 class="list_card_number" name="merchantOrderCount">--</h4>
											<span class="list_card_title">商户码订单数</span>
										</div>
									</li>
								</ul>
							</div>
						</div>
						<!-- /.chat -->
						<div class="box-footer">

						</div>
					</div>

					<div class="box box-success">
						<div class="box-header" style="border-bottom:1px solid #eee;">
							<h3 class="box-title">新增码统计</h3>
							<div class="box-tools pull-right" data-toggle="tooltip" title="Status" style="width:300px;">
								<div class="form-group">
									<div class="input-group">
										<div class="input-group-addon">
											<i class="fa fa-calendar"></i>
										</div>
										<input type="text" class="form-control pull-right" id="count">
									</div>
									<!-- /.input group -->
								</div>
							</div>
						</div>
						<div class="box-body chat">
							<!-- chat item -->
							<div class="box_content">
								<div class="chart">
	                <canvas id="lineChart" style="height:250px"></canvas>
	              </div>
							</div>

						</div>
						<!-- /.chat -->
						<div class="box-footer">

						</div>
					</div>
				</section>
			</div>
		</div>
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="dist/js/adminlte.min.js"></script>
		<script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
		<script src="plugins/timepicker/bootstrap-timepicker.min.js"></script>
		<script src="bower_components/moment/min/moment.min.js"></script>
		<script src="bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
		
		<script src="bower_components/chart.js/Chart.js"></script>
		
		<script src="js/fr_func.js"></script>
		<script src="js/fr.js"></script>
		<script src="js/nav.js"></script>
		<script type="text/javascript">
			var areaChartOptions = {
      //Boolean - If we should show the scale at all
      showScale               : true,
      //Boolean - Whether grid lines are shown across the chart
      scaleShowGridLines      : false,
      //String - Colour of the grid lines
      scaleGridLineColor      : 'rgba(0,0,0,.05)',
      //Number - Width of the grid lines
      scaleGridLineWidth      : 1,
      //Boolean - Whether to show horizontal lines (except X axis)
      scaleShowHorizontalLines: true,
      //Boolean - Whether to show vertical lines (except Y axis)
      scaleShowVerticalLines  : false,
      //Boolean - Whether the line is curved between points
      bezierCurve             : true,
      //Number - Tension of the bezier curve between points
      bezierCurveTension      : 0.3,
      //Boolean - Whether to show a dot for each point
      pointDot                : false,
      //Number - Radius of each point dot in pixels
      pointDotRadius          : 6,
      //Number - Pixel width of point dot stroke
      pointDotStrokeWidth     : 1,
      //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
      pointHitDetectionRadius : 20,
      //Boolean - Whether to show a stroke for datasets
      datasetStroke           : true,
      //Number - Pixel width of dataset stroke
      datasetStrokeWidth      : 2,
      //Boolean - Whether to fill the dataset with a color
      datasetFill             : true,
      //String - A legend template
      legendTemplate          : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',
      //Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
      maintainAspectRatio     : true,
      //Boolean - whether to make the chart responsive to window resizing
      responsive              : true
    }
			function dataCountDetails() {
				var param = {
					"token": localStorage.getItem("fr_token")
				}
				$.ajax({
					type: "post",
					url: url + "/data/dataCountDetails",
					async: true,
					data: JSON.stringify(param),
					contentType: "application/json",
					dataType: "json",
					success: function(res) {
						if(res.returnCode == 501) {
							ToLogin(res)
						} else if(res.returnCode == 200) {
							$.each(res.data, function(index, item) {
								$("[name=" + index + "]").html(item);
								//				  				console.log(res.menuData);
							})
						} else {
							alert(res.msg);
						}
					}
				})

			}

			function codeDataDetails() {
				var time = TimeRange("reservation")
				var param = {
					token: localStorage.getItem("fr_token"),
					startTime: time.startTime,
					endTime: time.endTime
				}
				$.ajax({
					type: "post",
					url: url + "/data/codeDataDetails",
					async: true,
					data: JSON.stringify(param),
					contentType: "application/json",
					dataType: "json",
					success: function(res) {
						if(res.returnCode == 501) {
							ToLogin(res)
						} else if(res.returnCode == 200) {
							$.each(res.data, function(index, item) {
								$("[name=" + index + "]").html(item);
							})

						} else {
							alert(res.msg);
						}
					}
				})

			}

			function newCodeDetails() {
				var time = TimeRange("count")
				var param = {
					token: localStorage.getItem("fr_token"),
					startTime: time.startTime,
					endTime: time.endTime
				}
				$.ajax({
					type: "post",
					url: url + "/data/newCodeDetails",
					async: true,
					data: JSON.stringify(param),
					contentType: "application/json",
					dataType: "json",
					success: function(res) {
						if(res.returnCode == 501) {
							ToLogin(res)
						} else if(res.returnCode == 200) {
							var labels=[],charData=[];
							$.each(res.data,function(index,item){
								labels.push(index);
								charData.push(item);
							})
							console.log(labels);
							console.log(charData);
							
							var areaChartData = {
								labels: labels,
								datasets: [{
									label               : 'Digital Goods',
					        fillColor           : 'rgba(60,141,188,0.9)',
					        strokeColor         : 'rgba(60,141,188,0.8)',
					        pointColor          : '#3b8bba',
					        pointStrokeColor    : 'rgba(60,141,188,1)',
									pointHighlightFill: '#fff',
									pointHighlightStroke: 'rgba(220,220,220,1)',
									data: charData
								}]
							}

							var lineChartCanvas = $('#lineChart').get(0).getContext('2d')
							var lineChart = new Chart(lineChartCanvas)
							var lineChartOptions = areaChartOptions
							lineChartOptions.datasetFill = false
							lineChart.Line(areaChartData, lineChartOptions)
						} else {
							alert(res.msg);
						}
					}
				})
			}

			$(function() {
				
				
				$('#reservation').daterangepicker({
					locale: {
						format: "YYYY-MM-DD"
					}
				});
				$('#count').daterangepicker({
					locale: {
						format: "YYYY-MM-DD"
					}
				});
				dataCountDetails();
				codeDataDetails();
				newCodeDetails();

				$("#reservation").change(function() {
					codeDataDetails();
				})

				$("#count").change(function() {
					newCodeDetails();
				})
			})
		</script>
	</body>

</html>